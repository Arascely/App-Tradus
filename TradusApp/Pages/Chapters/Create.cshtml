@page
@model TradusApp.Pages.Chapters.CreateModel
@{
    ViewData["Title"] = "Crear Capítulo";
}

<style>
    .page-wrap {
        max-width:1100px;
        margin:0 auto;
        padding:1rem;
    }

    .card {
        background: #ffffff;
        border:1px solid #e2e8f0;
        border-radius:14px;
        padding:2rem;
        box-shadow:01px3px rgba(0,0,0,0.05);
        animation: fadeIn .3s ease-in-out;
    }

    @@keyframes fadeIn {
        from {
            opacity:0;
            transform: translateY(5px);
        }
        to {
            opacity:1;
            transform: translateY(0);
        }
    }

    h1.page-title {
        font-size:1.9rem;
        font-weight:700;
        color: #1a202c;
        margin-bottom:1.6rem;
        padding-bottom: .35rem;
        border-bottom:3px solid var(--primary);
        letter-spacing: -.5px;
    }

    .form-group {
        margin-bottom:1.1rem;
    }

    .form-label {
        font-weight:600;
        display: block;
        margin-bottom: .35rem;
        color: #2d3748;
    }

    .form-input,
    .form-textarea {
        width:100%;
        padding: .75rem .9rem;
        border:1px solid #cbd5e0;
        border-radius:8px;
        font-size:1rem;
        background: #fafafa;
        transition: border-color .15s, box-shadow .15s;
    }

    .form-input:focus,
    .form-textarea:focus {
        border-color: var(--primary);
        box-shadow:0002px rgba(99,102,241, .15);
        outline: none;
    }

    .form-textarea {
        min-height:230px;
        line-height:1.55;
        resize: vertical;
    }

    .actions {
        display: flex;
        gap: .75rem;
        margin-top:1.2rem;
    }

    .btn {
        padding: .65rem1.2rem;
        border: none;
        border-radius:8px;
        font-weight:600;
        cursor: pointer;
        font-size: .95rem;
        transition: .15s ease;
    }

    .btn-primary {
        background: var(--primary);
        color: #fff;
    }

    .btn-primary:hover {
        background: var(--primary2);
    }

    .btn-secondary {
        background: #e2e8f0;
        color: #2d3748;
    }

    .btn-secondary:hover {
        background: #d2dae3;
    }
</style>

<div class="page-wrap">
    <div class="card">

        <h1 class="page-title">Crear Capítulo</h1>

        <form method="post" id="chapterForm">
            @Html.AntiForgeryToken()
            <input type="hidden" asp-for="Input.LibroId" />

            <!-- Número -->
            <div class="form-group">
                <label asp-for="Input.Numero" class="form-label"></label>
                <input asp-for="Input.Numero" class="form-input" />
                <span asp-validation-for="Input.Numero" class="text-danger"></span>
            </div>

            <!-- Título -->
            <div class="form-group">
                <label asp-for="Input.Titulo" class="form-label"></label>
                <input asp-for="Input.Titulo" class="form-input" />
                <span asp-validation-for="Input.Titulo" class="text-danger"></span>
            </div>

            <!-- Contenido -->
            <div class="form-group">
                <label asp-for="Input.Contenido" class="form-label"></label>
                <textarea asp-for="Input.Contenido" class="form-textarea"></textarea>
                <span asp-validation-for="Input.Contenido" class="text-danger"></span>
            </div>

            <!-- Botones -->
            <div class="actions">
                <button class="btn btn-primary" type="submit">Guardar</button>
                <a class="btn btn-secondary" asp-page="/Books/Manage">Cancelar</a>
            </div>
        </form>

    </div>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />

    <script>
        (function () {

            let changed = false;
            const form = document.getElementById('chapterForm');

            form.addEventListener('input', () => changed = true);

            window.addEventListener('beforeunload', function (e) {
                if (changed) {
                    e.preventDefault();
                    e.returnValue = '';
                }
            });

        })();
    </script>
}
